# Maintainer: SkorionOS Team
pkgname=steamdeck-kde-presets-simple
_pkgname=steamdeck-kde-presets
pkgver=0.29
pkgrel=1
pkgdesc="KDE Presets from Valve's SteamOS 3.0"
arch=('any')
url="https://github.com/SkorionOS/skorionos"
license=('GPL2')
conflicts=('steameck-gnome-presets' 'steamdeck-kde-presets')
source=("https://gitlab.com/evlaV/${_pkgname}/-/archive/${pkgver}/${_pkgname}-${pkgver}.tar.gz")
md5sums=('SKIP')

package() {
    cd "$srcdir/${_pkgname}-${pkgver}"


    # Handle kio servicemenus
    install -dm755 "$pkgdir/usr/share/kio/servicemenus"
    if [ -f "$pkgdir/usr/share/kservices5/ServiceMenus/steam.desktop" ]; then
        mv "$pkgdir/usr/share/kservices5/ServiceMenus/steam.desktop" \
            "$pkgdir/usr/share/kio/servicemenus/steam.desktop"
        rm -rf "$pkgdir/usr/share/kservices5"
    else
        install -m755 -t "$pkgdir/usr/share/kio/servicemenus" usr/share/kio/servicemenus/*
    fi
}
